{namespace flux=Tx_Flux_ViewHelpers}
<div xmlns="http://www.w3.org/1999/xhtml" lang="en"
     xmlns:f="http://typo3.org/ns/fluid/ViewHelpers">

<style type="text/css">
.fce-header { background-color: #5B5B5B; background-image: -moz-linear-gradient(center top , #7F7F7F 10%, #5B5B5B 100%); padding: 4px; margin-top: 8px; color: white; font-weight: bold; }
.fce-header span { position: absolute; }
.fce-header div { text-align: center; }

.fce-container .t3-page-ce-body { margin-bottom: 8px; }
td.spacer { width: 8px !important; max-width: 8px !important; height: 8px; }
</style>

<table style="width: 100%; margin-top: 8px;" cellspacing="0" cellpadding="0">
	<tbody>
	<f:for each="{grid}" as="gridrow" iteration="rowIteration">
		<tr>
		<f:for each="{gridrow}" as="gridcolumn" iteration="columnIteration">
			<td colspan="{gridcolumn.colspan}" rowspan="{gridcolumn.rowspan}" style="{gridcolumn.style}">
			<f:for each="{gridcolumn.areas}" as="area">
				<flux:be.contentArea area="{area.name}" row="{row}">
					<div class="fce-header t3-page-colHeader t3-page-colHeader-label">
						<div><f:translate key="{area.label}" default="{area.label}" /></div>
					</div>
					<div class="fce-container">
						<div class="t3-page-ce">
							<div class="t3-page-ce-dropzone" id="colpos-{row.colPos}-page-{row.pid}-{area.md5}-top-{row.uid}-{area.name}" style="height: 16px;">
								<div class="t3-page-ce-wrapper-new-ce">
									<flux:be.link.content.new row="{row}" area="{area.name}" />
								</div>
							</div>
						</div>
						<f:for each="{records}" as="record">
							<div class="t3-page-ce" id="element-tt_content-{record.uid}">
								<div class="t3-page-ce-dragitem">
									<flux:be.contentElement row="{record}" dblist="{dblist}" />
										</div>
									</div>
								<div class="t3-page-ce-dropzone" id="colpos-{record.colPos}-page-{record.pid}-{row.uid}-after-{row.uid}" style="height: 16px;">
									<div class="t3-page-ce-wrapper-new-ce">
										<flux:be.link.content.new row="{row}" area="{area.name}" />
									</div>
								</div>
							</div>
						</f:for>
					</div>
				</flux:be.contentArea>
			</f:for>

			</td>
			<f:if condition="{columnIteration.isLast} < 1">
				<td class="spacer">&nbsp;</td>
			</f:if>
		</f:for>
		</tr>
		<tr>
		<f:for each="{gridrow.totalColumnCount}" as="void">
			<td class='spacer'>&nbsp;</td>
		</f:for>
		</tr>
	</f:for>
	</tbody>
</table>

</div>